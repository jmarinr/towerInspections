<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PTI - Mantenimiento Preventivo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="toast" id="toast"></div>
    
    <header class="form-header">
        <div class="form-header-top">
            <div class="form-header-left">
                <a href="index.html" class="back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
                </a>
                <div class="form-header-logo">
                    <div class="form-header-icon">PTI</div>
                    <div>
                        <div class="form-header-title">Phoenix Tower International</div>
                        <div class="form-header-subtitle">Sistema de Mantenimiento Preventivo</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="progress-section">
            <div class="progress-header">
                <span class="progress-label">Progreso del reporte</span>
                <span class="progress-value" id="progress-percent">0%</span>
            </div>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width:0%"></div></div>
            <div class="progress-stats">
                <div class="progress-stat"><span class="stat-dot complete"></span><span id="stat-complete">0</span> completados</div>
                <div class="progress-stat"><span class="stat-dot na"></span><span id="stat-na">0</span> no aplican</div>
                <div class="progress-stat"><span class="stat-dot pending"></span><span id="stat-pending">30</span> pendientes</div>
            </div>
        </div>
    </header>

    <main class="form-main">
        <!-- Instructions -->
        <div class="info-banner">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
            <div>
                <div class="info-banner-title">Instrucciones</div>
                <div class="info-banner-text">Complete la información del sitio y registre cada actividad con fotos ANTES y DESPUÉS. Las fotografías deben mostrar fecha, hora y coordenadas GPS.</div>
            </div>
        </div>

        <!-- Site Type -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    Tipo de Sitio
                </h2>
                <button class="tooltip-btn" title="Seleccione el tipo de sitio para cargar las actividades correspondientes">?</button>
            </div>
            <div class="card-body">
                <div class="site-type-grid">
                    <div class="site-type-btn active" data-type="rawland" onclick="selectSiteType('rawland')">
                        <svg class="site-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 21h18"/><path d="M5 21V7l7-4 7 4v14"/><path d="M9 21v-6h6v6"/></svg>
                        <div class="site-type-name">Rawland</div>
                        <div class="site-type-desc">Torre en terreno propio</div>
                        <div class="site-type-count">30 actividades</div>
                    </div>
                    <div class="site-type-btn" data-type="rooftop" onclick="selectSiteType('rooftop')">
                        <svg class="site-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="8" width="18" height="13" rx="1"/><path d="M3 12h18"/><path d="M8 21v-5h8v5"/><path d="M10 4h4v4h-4z"/></svg>
                        <div class="site-type-name">Rooftop</div>
                        <div class="site-type-desc">Torre en azotea de edificio</div>
                        <div class="site-type-count">29 actividades</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Site Info -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                    Información del Sitio
                </h2>
            </div>
            <div class="card-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="label">Proveedor<span class="required">*</span><button class="tooltip-btn" title="Nombre de la empresa contratista">?</button></label>
                        <input type="text" class="input" id="proveedor" placeholder="Ej: Servicios Torres CR">
                    </div>
                    <div class="form-group">
                        <label class="label">Logo del Proveedor</label>
                        <div class="logo-upload" id="logo-upload" onclick="document.getElementById('logo-input').click()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                            Subir logo
                        </div>
                        <img class="logo-preview hidden" id="logo-preview" onclick="removeLogo()">
                        <input type="file" id="logo-input" accept="image/*" class="hidden" onchange="handleLogoUpload(event)">
                    </div>
                    <div class="form-group">
                        <label class="label">ID Sitio<span class="required">*</span><button class="tooltip-btn" title="Código único asignado por PTI">?</button></label>
                        <input type="text" class="input" id="id-sitio" placeholder="Ej: PTI-CR-001">
                    </div>
                    <div class="form-group">
                        <label class="label">Nombre del Sitio<span class="required">*</span></label>
                        <input type="text" class="input" id="nombre-sitio" placeholder="Ej: San José Centro">
                    </div>
                    <div class="form-group form-group-full">
                        <label class="label">Tipo de Visita<span class="required">*</span><button class="tooltip-btn" title="Motivo principal de la visita">?</button></label>
                        <select class="select" id="tipo-visita">
                            <option value="Mantenimiento Preventivo">Mantenimiento Preventivo</option>
                            <option value="Mantenimiento Correctivo">Mantenimiento Correctivo</option>
                            <option value="Inspección">Inspección</option>
                            <option value="Emergencia">Emergencia</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="label">Fecha<span class="required">*</span></label>
                        <input type="date" class="input" id="fecha">
                    </div>
                    <div class="form-group">
                        <label class="label">Hora<span class="required">*</span></label>
                        <input type="time" class="input" id="hora">
                    </div>
                    <div class="form-group form-group-full">
                        <label class="label">Coordenadas GPS<button class="tooltip-btn" title="Presione el botón para capturar automáticamente">?</button></label>
                        <div class="input-group">
                            <input type="text" class="input" id="coordenadas" placeholder="Latitud, Longitud" readonly>
                            <button type="button" class="icon-btn" id="gps-btn" onclick="getLocation()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/></svg>
                            </button>
                        </div>
                        <div class="input-hint">Presione el botón para capturar ubicación automáticamente</div>
                    </div>
                    <div class="form-group form-group-full">
                        <label class="label">Dirección del Sitio</label>
                        <input type="text" class="input" id="direccion" placeholder="Dirección física completa">
                    </div>
                </div>
            </div>
        </div>

        <!-- Activities -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    Trabajos Ejecutados
                </h2>
                <span style="font-size:13px;color:var(--gray-500)"><span id="activity-count">30</span> actividades</span>
            </div>
            <div style="padding:12px">
                <div class="activity-list" id="activity-list"></div>
            </div>
        </div>

        <!-- Summary -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                    Resumen
                </h2>
            </div>
            <div class="card-body">
                <div class="summary-grid">
                    <div class="summary-item complete"><div class="summary-number complete" id="summary-complete">0</div><div class="summary-label complete">Completados</div></div>
                    <div class="summary-item na"><div class="summary-number na" id="summary-na">0</div><div class="summary-label na">No Aplica</div></div>
                    <div class="summary-item pending"><div class="summary-number pending" id="summary-pending">30</div><div class="summary-label pending">Pendientes</div></div>
                </div>
            </div>
        </div>

        <!-- Submit -->
        <button type="button" class="submit-btn" id="submit-btn" disabled onclick="generateReport()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
            <span id="submit-text">Complete todas las actividades (0%)</span>
        </button>

        <div class="footer-note">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
            Las fotografías deben mostrar: Fecha, Hora y Coordenadas GPS
        </div>
    </main>

    <script src="js/mantenimiento.js"></script>
</body>
</html>
